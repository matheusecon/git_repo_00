library(dplyr) #é necessário para utilizar a função %>%
library(RColorBrewer)
library(leaflet) #é uma paleta de cores
#carregar a base de dados
### Mudar o diretório para onde a base esta localizada
setwd("C:/Users/ribei/OneDrive/PDM/Scripts/R/econometria/Dummies/Dados dos estados")
base <- read_excel("data.xlsx")
### Ler a base
library("readxl")
base <- read_excel("data.xlsx")
library(rgdal)
shp <- readOGR("Mapa\\.", "BRUFE250GC_SIR", stringsAsFactors=FALSE, encoding="UTF-8")
### Códigos dos estados
ibge <- read_excel("ibge.xlsx")
ibge <- ibge[order(ibge$estado),]
### Merge com da base com os códigos
df <- merge(base,ibge, by.x = "estado", by.y = "estado")
### Merge shape e a base
dfespacial <- merge(shp,df, by.x = "CD_GEOCUF", by.y = "CD_GEOCUF")
### Converter o nome do estado para UFT-8
proj4string(dfespacial) <- CRS("+proj=longlat +datum=WGS84 +no_defs")
Encoding(dfespacial$NM_ESTADO) <- "UTF-8"
### Mapa dos estados brasileiros
pal <- colorBin("Blues",domain = NULL,n=5) #cores do mapa
state_popup <- paste0("<strong>Estado: </strong>",
dfespacial$NM_ESTADO,
"<br><strong>Pontos: </strong>",
dfespacial$rendapercapta)
leaflet(data = dfespacial) %>%
addProviderTiles("CartoDB.Positron") %>%
addPolygons(fillColor = ~pal(dfespacial$rendapercapta),
fillOpacity = 0.8,
color = "#BDBDC3",
weight = 1,
popup = state_popup) %>%
addLegend("bottomright", pal = pal, values = ~dfespacial$rendapercapta,
title = "Renda per capta",
opacity = 1)
### Regiões do brasil
regiao <- read_excel("regioes.xlsx")
df <- merge(df,regiao, by.x = "sigla", by.y = "sigla")
### Estatísticas descritivas por região
tapply(df$rendapercapta, df$região, summary)
# Dummy de região
library('fastDummies')
df <- dummy_cols(df, select_columns = 'região') #no lugar de 'rank' pode-se colocar c('rank', 'discipline')
df$NORTENORDESTE = 0
df$NORTENORDESTE[df$região == 'SUDESTE'] <- 1
df$NORTENORDESTE[df$região == 'SUL'] <- 1
df$NORTENORDESTE[df$região == 'CENTRO-OESTE'] <- 1
head(df)
model1 <-lm(`rendapercapta`~`NORTENORDESTE`,
data = df)
summary(model1)
### Com outras variáveis
model2 <-lm(log(rendapercapta) ~ NORTENORDESTE + saneamento.inadequado + analfabetismo,
data = df)
summary(model2)
### Com outras variáveis
model2 <-lm(log(rendapercapta) ~ NORTENORDESTE + saneamento.inadequado + analfabetismo,
data = df)
summary(model2)
### Com outras variáveis
model2 <-lm(rendapercapta ~ NORTENORDESTE + saneamento.inadequado + analfabetismo,
data = df)
summary(model2)
